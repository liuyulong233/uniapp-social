<template>
	<view style="height: 100%;">
	   <!-- <newsNabBar
	   :tabs="tabs"
	   :tabindex="tabindex"
	   @change="change($event)"
	   @openadd="openadd"
	   >	
	   </newsNabBar>.-. -->
		<!-- å…¬å…±åˆ—è¡¨ -->
		<view class="uni-tab-bar">
		 <swiper class="swiper-box" :style="{height:swheigth+'px'}" :current="tabindex" @change="watchchange"> 
				<swiper-item>
					<scroll-view scroll-y class="list" scroll-with-animation="true" @scrolltolower="loadtop()">
					<block v-for="(item,index) in guanzhu.list" :key="index"> 
						<comonNews
					    :item="item"
						:index="index"
						@isgz="isgz(index)"
						></comonNews>
					</block>
					<view class="load">{{guanzhu.loadtext}}</view>
				    </scroll-view>	
				</swiper-item>
				<swiper-item>
					<scroll-view scroll-y class="list" scroll-with-animation="true">
					<!-- æœç´¢ -->
					<view class="search">
					     <input class="inpu" 
						 placeholder="æœç´¢å†…å®¹" 
						 placeholder-class="icon iconfont icon-sousuo input-search"/>
					</view>
					<!-- è½®æ’­ -->
					<swiper class="big-swiper" :indicator-dots="true" :autoplay="true" :interval="3000" :duration="500">
						<block v-for="(item,index) in topic.sweiper" :key="index">
							 <swiper-item class="one">
							 	<view class="swiper-item">
							 		<image :src="item.src" mode="widthFix" lazy-load></image>
							 	</view>
							 </swiper-item>
						</block>
					</swiper>				
					<!-- çƒ­é—¨åˆ†ç±» -->
					<topicNews :arryfenlei="topic.fenlei"></topicNews>
					<!-- æœ€è¿‘æ›´æ–° -->
					<view class="top-new">
						<view>æœ€è¿‘æ›´æ–°</view>
						<block v-for="(item,index) in topic.lists" :key="index">
							<topicList :item="item" :index="index"></topicList>
						</block>
					</view>
					</scroll-view>	
				</swiper-item>	
		</swiper>
		</view>
	</view>
</template>

<script>	
	import comonNews from '../../compoents/common/comon-news.vue';
	import newsNabBar from '../../compoents/news/news-nab-bar.vue';
	import loadMore from "../../compoents/common/load-more.vue";
	import topicNews from "../../compoents/news/topic-news.vue";
	import topicList from "../../compoents/news/topic-list.vue";
	export default {
		components:{			
			comonNews,
			newsNabBar,
			loadMore,
			topicNews,
			topicList
		},
		data() {
			return {
				swheigth:0,
				tabindex:0,
				topic:{
					sweiper:[
						{src:'../../static/datapic/37.jpg'},
						{src:'../../static/datapic/37.jpg'},
						{src:'../../static/datapic/37.jpg'}
					],
					fenlei:[
						{name:"æœ€æ–°"},
						{name:"æ¸¸æˆ"},
						{name:"æƒ…æ„Ÿ"},
						{name:"æ‰“å¡"},
						{name:"æ•…äº‹"},
						{name:"å–œçˆ±"}
					],
					lists:[
						{
							imgsrc:'../../static/topicpic/11.jpeg',
							titlea:'#æ·˜å®è®°å½•è–„#',
							neirong:'120æ–¤åˆ°80æ–¤ æˆ‘çš„åè½¬äººç”Ÿ',
							dongtainum:545,
							jinrinum:720		
						},
						{
							imgsrc:'../../static/topicpic/11.jpeg',
							titlea:'#æ·˜å®è®°å½•è–„#',
							neirong:'120æ–¤åˆ°80æ–¤ æˆ‘çš„åè½¬äººç”Ÿ',
							dongtainum:545,
							jinrinum:720		
						},
						{
							imgsrc:'../../static/topicpic/11.jpeg',
							titlea:'#æ·˜å®è®°å½•è–„#',
							neirong:'120æ–¤åˆ°80æ–¤ æˆ‘çš„åè½¬äººç”Ÿ',
							dongtainum:545,
							jinrinum:720		
						},
						{
							imgsrc:'../../static/topicpic/11.jpeg',
							titlea:'#æ·˜å®è®°å½•è–„#',
							neirong:'120æ–¤åˆ°80æ–¤ æˆ‘çš„åè½¬äººç”Ÿ',
							dongtainum:545,
							jinrinum:720		
						}
					]
				},
				tabs:[
					{
						name:'å…³æ³¨',
						id:'guanzhu'
					},
					{
						name:'è¯é¢˜',
						id:'huati'
					}
				],
				guanzhu:{
					loadtext:"ä¸Šæ‹‰åŠ è½½æ›´å¤šðŸ‘†",
					list:[
						{
							//æ–‡å­—
						  userimg:'../../static/userpic/19.jpg',
						  username:'å¼ ä¸‰',
						  userage:'30',
						  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
						  isguanzhu:false,
						  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
						  titleimg:'',
						  video:false,
						  sharea:false,
						  positiona:'æ·±åœ³ é¾™å²—',
						  sharenum:30,
						  pinglunnum:100,
						  zannum:50
						   
						},
						{
							//å›¾æ–‡
						  userimg:'../../static/userpic/19.jpg',
						  username:'å¼ ä¸‰',
						  userage:'30',
						  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
						  isguanzhu:false,
						  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
						  titleimg:'../../static/datapic/44.jpg',
						  video:false,
						  sharea:false,
						  positiona:'æ·±åœ³ é¾™å²—',
						  sharenum:30,
						  pinglunnum:100,
						  zannum:50
						   
						},
						{
							//è§†é¢‘
						  userimg:'../../static/userpic/19.jpg',
						  username:'æŽå››',
						  userage:'37',
						  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
						  isguanzhu:false,
						  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
						  titleimg:'../../static/datapic/44.jpg',
						  video:{
							  bofangnum:'20w',
							  shijian:'2:47'
						  },
						  sharea:false,
						  positiona:'æ·±åœ³ é¾™å²—',
						  sharenum:30,
						  pinglunnum:100,
						  zannum:50
						   
						},
						{
						  userimg:'../../static/userpic/19.jpg',
						  username:'å¼ ä¸‰',
						  userage:'30',
						  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
						  isguanzhu:false,
						  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
						  titleimg:'',
						  video:false,
						  sharea:{
							  shareimg:'../../static/datapic/44.jpg',
							  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
						  },
						  positiona:'æ·±åœ³ é¾™å²—',
						  sharenum:30,
						  pinglunnum:100,
						  zannum:50
						   
						},
						{
						  userimg:'../../static/userpic/19.jpg',
						  username:'å¼ ä¸‰',
						  userage:'30',
						  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
						  isguanzhu:false,
						  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
						  titleimg:'',
						  video:false,
						  sharea:{
							  shareimg:'../../static/datapic/44.jpg',
							  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
						  },
						  positiona:'æ·±åœ³ é¾™å²—',
						  sharenum:30,
						  pinglunnum:100,
						  zannum:50
						   
						},
						{
						  userimg:'../../static/userpic/19.jpg',
						  username:'å¼ ä¸‰',
						  userage:'30',
						  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
						  isguanzhu:false,
						  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
						  titleimg:'',
						  video:false,
						  sharea:{
							  shareimg:'../../static/datapic/44.jpg',
							  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
						  },
						  positiona:'æ·±åœ³ é¾™å²—',
						  sharenum:30,
						  pinglunnum:100,
						  zannum:50
						   
						}
					]
				}
			}
		},
		methods: {
			watchchange(e){
				this.tabindex=e.detail.current;
			},
			change(index){
				//console.log(index)
				this.tabindex=index;
			//	uni.setStorageSync('storage_key', 'hello');
			},
			openadd(e){
				//console.log(e)
				uni.navigateTo({
				   url:'../fabu/fabu'	   
				});
			},
			isgz(index){
				//console.log(this.list[index].isguanzhu)
				this.guanzhu.list[index].isguanzhu=true;
				uni.showToast({
					title:'å…³æ³¨æˆåŠŸ',
					icon:'none',
					mask:true
				})
			},
			//ä¸Šæ‹‰åŠ è½½
			loadtop(){
				if(this.guanzhu.loadtext!="ä¸Šæ‹‰åŠ è½½æ›´å¤šðŸ‘†"){return;}					
				this.guanzhu.loadtext="åŠ è½½ä¸­o(*ï¿£â–½ï¿£*)ãƒ–";
				setTimeout(()=> {
					let obj={
						//æ–‡å­—
					  userimg:'../../static/userpic/19.jpg',
					  username:'å¼ ä¸‰',
					  userage:'30',
					  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
					  isguanzhu:false,
					  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
					  titleimg:'',
					  video:false,
					  sharea:false,
					  positiona:'æ·±åœ³ é¾™å²—',
					  sharenum:30,
					  pinglunnum:100,
					  zannum:50					   
					};
					this.guanzhu.list.push(obj);
					this.guanzhu.loadtext="ä¸Šæ‹‰åŠ è½½æ›´å¤šðŸ‘†";				  
					//this.guanzhu.loadtext="æ²¡æœ‰æ›´å¤šæ•°æ®äº†/(ã„’oã„’)/~~";				 
				}, 1000);				
			}				
		},
		onLoad() {
		uni.getSystemInfo({
		    success:(res)=> {
		        let height=res.windowHeight-uni.upx2px(145);
				this.swheigth=height;			
		    }
		});				  
		}
		
	}
</script>

<style>
/*ä¸‹æ‹‰åŠ è½½æ ·å¼*/
.load{padding: 15upx 0;text-align: center;font-size: 25upx;color: #010101;}
/*æœç´¢æ ·å¼*/
.search{padding: 20upx;}
.input-search{text-align: center;font-size: 25upx;color: #9F9F9F;}
.inpu{background: #F4F4F4;border-radius: 10upx;text-align: center;padding: 10upx;}
/*swiperç»„ä»¶æ ·å¼*/
.big-swiper{padding: 0 20upx 20upx 20upx;}
swiper-item{border-radius: 20upx;}
.swiper-item image{width: 100%;height: 100%;border-radius: 20upx;}
/*æœ€è¿‘æ›´æ–°*/
.top-new{
	padding: 20upx;
}
.top-new>view:first-child{
	font-size: 30upx;
	padding-bottom: 10upx;
}
/*.top-new>view:last-child{
	height: 200upx;
}*/

</style>
